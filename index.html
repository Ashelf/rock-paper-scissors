<script>
var choices = ["rock", "paper", "scissors"];
var playerScore = 0;
var cpuScore = 0;

function cpuPlay() {
  let cpuChoice = Math.floor(Math.random() * 3);
  return choices[cpuChoice];
}

function playerPlay() {
  let playerChoice = prompt("Rock, paper, or scissors. The choice is yours!").toLowerCase();
  if (choices.indexOf(playerChoice) > -1) {
    return playerChoice;
  } else {
    console.log("You must choose between rock, paper, or scissors!");
    playerPlay();
  }
}

function gameRound(playerSelection, cpuSelection) {
  if (playerSelection === "rock" && cpuSelection === "paper") {
    cpuScore += 1;
    return "Paper beats rock! You lose!";
  } else if (playerSelection === "rock" && cpuSelection === "scissors") {
    playerScore += 1;
    return "Rock beats scissors! You win!";
  } else if (playerSelection === "paper" && cpuSelection === "rock") {
    playerScore += 1;
    return "Paper beats rock! You win!";
  } else if (playerSelection === "paper" && cpuSelection === "scissors") {
    cpuScore += 1;
    return "Scissors beat paper! You lose!";
  } else if (playerSelection === "scissors" && cpuSelection === "rock") {
    cpuScore += 1;
    return "Rock beats scissors! You lose!";
  } else if (playerSelection === "scissors" && cpuSelection === "paper") {
    playerScore += 1;
    return "Scissors beat paper! You win!";
  } else {
    playerScore += 1;
    cpuScore += 1;
    return "You both chose the same! It's a tie!";
  }
}

function game() {
  for(let i = 0; i < 5; i++) {
    console.log(gameRound(playerPlay(), cpuPlay()));
  }

  if(playerScore > cpuScore) {
    alert("Congratulations, you won the game!");
  } else if (cpuScore > playerScore) {
    alert("Oh no, you lose the game!");
  } else {
    alert("The game ends in a tie!");
  }
}

game();
</script>
